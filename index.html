<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CD Experience</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: white;
            color: black;
            font-family: Arial, sans-serif;
        }
        .container {
            text-align: center;
            width: 90%;
            max-width: 1200px;
        }
        .cd-cover, .cd-view, .lyrics-view {
            display: none;
        }
        .active {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .cd-view {
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
        }
        .cd-view img, .cd-view video {
            width: 30%;
            height: auto;
        }
        img, video {
            width: 700px;
            height: auto;
            cursor: pointer;
        }
        .button {
            margin-top: 20px;
            padding: 15px 30px;
            background-color: #ffcc00;
            border: none;
            cursor: pointer;
            font-size: 22px;
        }
        .player {
            margin-top: 20px;
        }
        .song-list {
            list-style: none;
            padding: 0;
            font-size: 20px;
        }
        .song-list li {
            cursor: pointer;
            padding: 8px;
        }
        .song-list li:hover {
            text-decoration: underline;
        }
        .lyrics-view {
            flex-direction: column;
            align-items: center;
        }
        .annotated {
            background-color: yellow;
            cursor: pointer;
        }
        #annotation-box {
            position: absolute;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 5px;
            display: none;
            max-width: 300px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="annotation-box"></div>

    <div class="container">
        <div id="cdCover" class="cd-cover active">
            <img src="covernew.jpg" alt="CD Cover" onclick="showCDView()">
        </div>
        <div id="cdView" class="cd-view">
            <img src="covernew.jpg" alt="CD Cover">
            <video id="cdVideo" src="cd-rotating.mp4" autoplay loop muted></video>
            <img src="backnew.jpg" alt="CD Back">
        </div>
        <button class="button" onclick="startListening()">Start listening + lyrics!</button>
        <div id="lyricsView" class="lyrics-view">
            <video id="lyricsVideo" src="cd-rotating.mp4" autoplay loop muted></video>
            <ul class="song-list" id="songList"></ul>
            <audio id="audioPlayer" controls>
                <source id="audioSource" src="" type="audio/mp3">
                Your browser does not support the audio element.
            </audio>
            <div class="player">
                <button onclick="prevSong()">⏮️</button>
                <button onclick="togglePlay()">▶️/⏸️</button>
                <button onclick="nextSong()">⏭️</button>
            </div>
            <p id="currentSong">Select a song</p>
        </div>
    </div>

    <script>
        // Cargar las canciones y las letras
        const songs = [
            {
                title: "margaret by lana del rey ft bleachers",
                file: "song1.mp3",
                lyrics: `
                    This is a simple song, gonna write it for a friend
                    My shirt is inside out, I'm messy with the pen
                    He met Margaret on a rooftop, she was wearin' white
                    <span class="annotated" data-note="un ratito de hablar de lo que resultó ser mi drama favorito y ya estaba dudando de lo que podríamos ser. un día entero hablando con vos y ya nos veía exactamente donde estamos ahora, todos los días cuestionaba si saltar del edificio o esperar una señal">And he was like, 'I might be in trouble'</span>
                    <span class="annotated" data-note="el amor existe por y para nosotros">'Cause, baby, if your love is in trouble</span>
                    <span class="annotated" data-note="estábamos(estamos) tan enganchados tan rápido que para justificarnos a nosotros mismos y nuestras emociones descomunales y gigantes nos repetíamos esto todos los días <3 en chiste pero no en chiste">When you know, you know</span>
                    When you're good as gold
                    <span class="annotated" data-note="contándole a mis amigos ohh conocí a alguien y tal vez... me hablo con uno pero... hablo cada vez más con gami y quizás... pero desvergonzadamente admitiendo que estaba enamorado de vos a dos semanas de conocerte <3">Word to all my friends</span>
                    <span class="annotated" data-note="el amor existe por y para nosotros">'Cause, baby, if your love is in trouble</span>
                    'Cause when you know, you know
                `
            }
        ];

        // Función para mostrar la letra de la canción y las anotaciones
        function showLyrics(songIndex) {
            const song = songs[songIndex];
            const lyricsContent = document.getElementById('lyrics-content');
            const annotationBox = document.getElementById('annotation-box');
            
            // Mostrar la letra con las anotaciones
            lyricsContent.innerHTML = song.lyrics;

            // Mostrar las anotaciones al hacer clic en la línea
            const annotatedElements = document.querySelectorAll('.annotated');
            annotatedElements.forEach(element => {
                element.addEventListener('click', function () {
                    const note = element.getAttribute('data-note');
                    annotationBox.innerHTML = note;
                    annotationBox.style.display = 'block';
                    annotationBox.style.left = `${element.getBoundingClientRect().left}px`;
                    annotationBox.style.top = `${element.getBoundingClientRect().top + element.offsetHeight}px`;
                });
            });
        }

        // Función para comenzar a escuchar
        function startListening() {
            const songList = document.getElementById('songList');
            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.innerText = song.title;
                li.addEventListener('click', function () {
                    showLyrics(index);
                });
                songList.appendChild(li);
            });
        }

        // Función para manejar la reproducción de la música
        function playSong(songIndex) {
            const audioPlayer = document.getElementById('audioPlayer');
            const song = songs[songIndex];
            const audioSource = document.getElementById('audioSource');
            audioSource.src = song.file;
            audioPlayer.load();
            audioPlayer.play();
        }
        
        // Mostrar la vista de la CD
        function showCDView() {
            document.getElementById('cdCover').classList.remove('active');
            document.getElementById('cdView').classList.add('active');
        }
        
        // Mostrar/ocultar el cuadro de anotación
        document.addEventListener('click', function (event) {
            if (!event.target.classList.contains('annotated')) {
                document.getElementById('annotation-box').style.display = 'none';
            }
        });
    </script>
</body>
</html>

